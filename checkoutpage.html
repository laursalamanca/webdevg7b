<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Checkout - BeatBox</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = { darkMode: "class" };
    </script>

    <!-- Set theme before paint -->
    <script>
      if (
        localStorage.theme === "dark" ||
        (!("theme" in localStorage) &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        document.documentElement.classList.add("dark");
      } else {
        document.documentElement.classList.remove("dark");
      }
    </script>
  </head>

  <body
    class="bg-white dark:bg-slate-900 text-slate-900 dark:text-white min-h-screen"
  >
    <!-- NAVBAR -->
    <nav
      class="bg-white dark:bg-black/80 backdrop-blur border-b border-gray-200 dark:border-gray-700"
    >
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="relative flex h-16 items-center justify-between">
          <!-- Logo -->
          <div class="flex items-center space-x-2">
            <span class="text-xl font-bold dark:text-white">BeatBox</span>
            <img src="images/music-box.png" class="h-8" alt="Logo" />
          </div>

          <!-- Mobile menu button -->
          <div class="flex sm:hidden">
            <button
              id="menu-toggle"
              class="p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-md"
            >
              <svg
                id="menu-open-icon"
                class="block h-6 w-6"
                fill="none"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                />
              </svg>
              <svg
                id="menu-close-icon"
                class="hidden h-6 w-6"
                fill="none"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
          </div>

          <!-- Desktop nav -->
          <div class="hidden sm:flex sm:space-x-4">
            <a href="index.html" class="nav-link">Home</a>
            <a href="about.html" class="nav-link">About</a>
            <a href="subscriptiontiers.html" class="nav-link"
              >Subscription Tiers</a
            >
            <a href="howitworks.html" class="nav-link">How It Works</a>
            <a href="featuredartist.html" class="nav-link">Featured Artist</a>
            <a href="checkoutpage.html" class="nav-link">Checkout</a>
            <a href="contact.html" class="nav-link">Contact Us</a>
          </div>

          <!-- Right: font size + theme toggle -->
          <div class="flex items-center space-x-2">
            <div
              class="flex items-center rounded-full border border-slate-300 dark:border-slate-700 bg-slate-100 dark:bg-slate-800 px-2 py-1 text-xs"
            >
              <button id="font-decrease" class="px-2 text-sm font-semibold">
                A
              </button>
              <span class="mx-1 h-4 w-px bg-slate-300 dark:bg-slate-600"></span>
              <button id="font-increase" class="px-2 text-base font-semibold">
                A
              </button>
            </div>

            <button
              id="theme-toggle"
              class="rounded-md px-3 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600"
            >
              ðŸŒ—
            </button>
          </div>
        </div>
      </div>

      <!-- Mobile menu -->
      <div id="mobile-menu" class="hidden sm:hidden px-2 pb-3 space-y-1">
        <a href="index.html" class="mobile-link">Home</a>
        <a href="about.html" class="mobile-link">About</a>
        <a href="subscriptiontiers.html" class="mobile-link"
          >Subscription Tiers</a
        >
        <a href="howitworks.html" class="mobile-link">How It Works</a>
        <a href="featuredartist.html" class="mobile-link">Featured Artist</a>
        <a href="checkoutpage.html" class="mobile-link">Checkout</a>
        <a href="contact.html" class="mobile-link">Contact Us</a>
      </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="container mx-auto px-4 py-10">
      <h1 class="text-3xl font-bold mb-6 text-center">Checkout</h1>
      <p class="text-center mb-8">Complete your subscription purchase below.</p>

      <!-- Checkout form -->
      <form
        id="checkout-form"
        class="max-w-lg mx-auto space-y-6 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg"
      >
        <!-- Full Name -->
        <label class="block">
          <span class="text-gray-700 dark:text-gray-200">Full Name</span>
          <input
            type="text"
            name="fullname"
            required
            class="mt-1 block w-full rounded-md border-gray-300 bg-gray-100 dark:border-gray-600 dark:bg-slate-700 p-2"
          />
        </label>

        <!-- Email -->
        <label class="block">
          <span class="text-gray-700 dark:text-gray-200">Email</span>
          <input
            type="email"
            name="email"
            required
            class="mt-1 block w-full rounded-md border-gray-300 bg-gray-100 dark:border-gray-600 dark:bg-slate-700 p-2"
          />
        </label>

        <!-- Subscription Tier -->
        <label class="block">
          <span class="text-gray-700 dark:text-gray-200"
            >Select Subscription Tier</span
          >
          <select
            name="tier"
            required
            class="mt-1 block w-full rounded-md border-gray-300 bg-gray-100 dark:border-gray-600 dark:bg-slate-700 p-2"
          >
            <option value="">-- Select Tier --</option>
            <option value="listener">Listener - $9.99/mo</option>
            <option value="groover">Groover - $19.99/mo</option>
            <option value="collector">Collector - $39.99/mo</option>
            <option value="headliner">Headliner - $59.99/mo</option>
          </select>
        </label>

        <!-- Credit Card Number -->
        <label class="block">
          <span class="text-gray-700 dark:text-gray-200"
            >Credit Card Number</span
          >
          <input type="text" name="cardnumber" maxlength="16" pattern="\d{16}"
          placeholder="1234123412341234" required class="mt-1 block w-full
          rounded-md border-gray-300 bg-gray-100 dark:border-gray-600
          dark:bg-slate-700 p-2" " />
        </label>

        <!-- Expiration & CVV -->
        <div class="flex space-x-4">
          <label class="block flex-1">
            <span class="text-gray-700 dark:text-gray-200"
              >Expiration Month</span
            >
            <input
              type="text"
              name="expmonth"
              maxlength="2"
              pattern="\d{2}"
              placeholder="MM"
              required
              class="mt-1 block w-full rounded-md border-gray-300 bg-gray-100 dark:border-gray-600 dark:bg-slate-700 p-2"
            />
          </label>

          <label class="block flex-1">
            <span class="text-gray-700 dark:text-gray-200"
              >Expiration Year</span
            >
            <input
              type="text"
              name="expyear"
              maxlength="2"
              pattern="\d{2}"
              placeholder="YY"
              required
              class="mt-1 block w-full rounded-md border-gray-300 bg-gray-100 dark:border-gray-600 dark:bg-slate-700 p-2"
            />
          </label>

          <label class="block flex-1">
            <span class="text-gray-700 dark:text-gray-200">CVV</span>
            <input
              type="text"
              name="cvv"
              maxlength="3"
              pattern="\d{3}"
              placeholder="123"
              required
              class="mt-1 block w-full rounded-md border-gray-300 bg-gray-100 dark:border-gray-600 dark:bg-slate-700 p-2"
            />
          </label>
        </div>

        <button
          type="submit"
          class="w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 rounded-xl transition"
        >
          Complete Purchase
        </button>
      </form>
    </main>

    <!-- JS Validation -->
    <script>
      const form = document.getElementById("checkout-form");
      form.addEventListener("submit", function (e) {
        e.preventDefault(); // Prevent real submission

        const tier = form.tier.value;
        const cardNumber = form.cardnumber.value;
        const expMonth = form.expmonth.value;
        const expYear = form.expyear.value;
        const cvv = form.cvv.value;

        if (!tier) {
          alert("Please select a subscription tier.");
          return;
        }

        if (!/^\d{16}$/.test(cardNumber)) {
          alert("Card number must be 16 digits.");
          return;
        }

        if (
          !/^\d{2}$/.test(expMonth) ||
          parseInt(expMonth) < 1 ||
          parseInt(expMonth) > 12
        ) {
          alert("Expiration month must be 2 digits (01-12).");
          return;
        }

        if (!/^\d{2}$/.test(expYear)) {
          alert("Expiration year must be 2 digits.");
          return;
        }

        if (!/^\d{3}$/.test(cvv)) {
          alert("CVV must be 3 digits.");
          return;
        }

        alert(
          `Payment successful for the ${tier.toUpperCase()} tier! (Simulation only)`
        );
        form.reset();
      });
    </script>

    <!-- JS -->
    <script>
      // Font size controls
      const inc = document.getElementById("font-increase");
      const dec = document.getElementById("font-decrease");
      let scale = 1;

      function applyScale() {
        document.documentElement.style.fontSize = 16 * scale + "px";
      }

      inc.addEventListener("click", () => {
        scale = Math.min(1.3, scale + 0.05);
        applyScale();
      });

      dec.addEventListener("click", () => {
        scale = Math.max(0.85, scale - 0.05);
        applyScale();
      });

      // Theme toggle
      const themeToggle = document.getElementById("theme-toggle");
      themeToggle.addEventListener("click", () => {
        const isDark = document.documentElement.classList.toggle("dark");
        localStorage.theme = isDark ? "dark" : "light";
      });

      // Mobile menu toggle
      const menuToggle = document.getElementById("menu-toggle");
      const mobileMenu = document.getElementById("mobile-menu");
      const openIcon = document.getElementById("menu-open-icon");
      const closeIcon = document.getElementById("menu-close-icon");

      menuToggle.addEventListener("click", () => {
        const hidden = mobileMenu.classList.toggle("hidden");
        openIcon.classList.toggle("hidden", !hidden);
        closeIcon.classList.toggle("hidden", hidden);
      });

      // Active nav link highlight
      const path = window.location.pathname.split("/").pop() || "index.html";
      document.querySelectorAll("nav a").forEach((a) => {
        if (a.getAttribute("href") === path) {
          a.classList.add("bg-gray-100", "dark:bg-gray-800", "text-blue-600");
        }
      });
    </script>

    <style>
      .nav-link {
        padding: 0.5rem 0.75rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: black;
        border-radius: 0.375rem;
      }
      .nav-link:hover {
        background-color: rgba(31, 41, 55, 0.05);
      }
      .dark .nav-link {
        color: white;
      }
      .mobile-link {
        padding: 0.5rem 0.75rem;
        display: block;
        font-size: 1rem;
        font-weight: 500;
        border-radius: 0.375rem;
      }
      .mobile-link:hover {
        background-color: rgba(31, 41, 55, 0.05);
      }
    </style>
  </body>
</html>
