<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BeatBox Home</title>

  <!-- Tailwind for styling -->
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    /* Enable dark mode support in Tailwind */
    tailwind.config = { darkMode: "class" }
  </script>

  <!-- Decide theme before paint so the page does not flash -->
  <script>
    if (
      localStorage.theme === "dark" ||
      (!("theme" in localStorage) &&
        window.matchMedia("(prefers-color-scheme: dark)").matches)
    ) {
      document.documentElement.classList.add("dark");
    } else {
      document.documentElement.classList.remove("dark");
    }
  </script>
</head>

<body class="bg-white dark:bg-slate-900 text-slate-900 dark:text-white min-h-screen">

  <!-- =============================== -->
  <!--           TOP NAVBAR            -->
  <!-- =============================== -->
  <nav class="bg-white dark:bg-black/80 backdrop-blur border-b border-gray-200 dark:border-gray-700">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="relative flex h-16 items-center justify-between">

        <!-- Brand logo and name -->
        <div class="flex items-center space-x-2">
          <span class="text-xl font-bold dark:text-white">BeatBox</span>
          <img src="images/music-box.png" class="h-8" alt="BeatBox logo" />
        </div>

        <!-- Mobile button to open or close nav links -->
        <div class="flex sm:hidden">
          <button id="menu-toggle" class="p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-md">
            <!-- three line icon when menu closed -->
            <svg id="menu-open-icon" class="block h-6 w-6" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M4 6h16M4 12h16M4 18h16" />
            </svg>
            <!-- x icon when menu open -->
            <svg id="menu-close-icon" class="hidden h-6 w-6" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>

        <!-- Desktop navigation links -->
        <div class="hidden sm:flex sm:space-x-4">
          <a href="index.html" class="nav-link">Home</a>
          <a href="about.html" class="nav-link">About</a>
          <a href="subscriptiontiers.html" class="nav-link">Subscription Tiers</a>
          <a href="howitworks.html" class="nav-link">How It Works</a>
          <a href="featuredartist.html" class="nav-link">Featured Artist</a>
          <a href="checkoutpage.html" class="nav-link">Checkout</a>
          <a href="contact.html" class="nav-link">Contact Us</a>
        </div>

        <!-- Right side controls for font size and theme -->
        <div class="flex items-center space-x-2">
          <!-- Font size controls -->
          <div class="flex items-center rounded-full border border-slate-300 dark:border-slate-700 bg-slate-100 dark:bg-slate-800 px-2 py-1 text-xs">
            <button id="font-decrease" class="px-2 text-sm font-semibold">A</button>
            <span class="mx-1 h-4 w-px bg-slate-300 dark:bg-slate-600"></span>
            <button id="font-increase" class="px-2 text-base font-semibold">A</button>
          </div>

          <!-- Theme toggle button -->
          <button id="theme-toggle"
                  class="rounded-md px-3 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600">
            ðŸŒ—
          </button>
        </div>

      </div>
    </div>

    <!-- Mobile navigation menu content -->
    <div id="mobile-menu" class="hidden sm:hidden px-2 pb-3 space-y-1">
      <a href="index.html" class="mobile-link">Home</a>
      <a href="about.html" class="mobile-link">About</a>
      <a href="subscriptiontiers.html" class="mobile-link">Subscription Tiers</a>
      <a href="howitworks.html" class="mobile-link">How It Works</a>
      <a href="featuredartist.html" class="mobile-link">Featured Artist</a>
      <a href="checkoutpage.html" class="mobile-link">Checkout</a>
      <a href="contact.html" class="mobile-link">Contact Us</a>
    </div>
  </nav>

  <!-- =============================== -->
  <!--           MAIN CONTENT          -->
  <!-- =============================== -->
  <main class="px-6 py-10 lg:px-12 lg:py-16 pt-20">

    <!-- Hero section -->
    <section class="mx-auto max-w-7xl grid gap-12 md:grid-cols-3 items-center">

      <!-- Left side hero copy -->
      <div class="space-y-6 md:col-span-2">
        <p class="inline rounded-full bg-purple-100 px-3 py-1 text-sm font-semibold text-purple-700 dark:bg-purple-900/40 dark:text-purple-200">
          Curated music boxes for rising artists
        </p>

        <h1 class="text-5xl font-bold leading-tight">
          BeatBox brings exclusive music, playlists, and merch straight to your door.
        </h1>

        <p class="text-lg max-w-xl text-slate-600 dark:text-slate-300">
          Every month, BeatBox curates a box with merch, digital playlists, and behind the scenes artist content.
        </p>

        <!-- Call to action buttons -->
        <div class="flex flex-wrap gap-4">
          <a href="subscriptiontiers.html"
             class="rounded-lg bg-purple-600 px-5 py-3 text-sm font-semibold text-white shadow hover:bg-purple-700">
            View subscription tiers
          </a>

          <a href="featuredartist.html"
             class="text-sm font-semibold text-purple-700 dark:text-purple-300">
            Meet the featured artist
          </a>
        </div>

        <!-- Two short feature blurbs -->
        <div class="grid gap-4 text-sm text-slate-600 dark:text-slate-300 sm:grid-cols-2">
          <div>
            <p class="font-semibold dark:text-slate-100">Hand picked every month</p>
            <p>Our team listens to many records and demos so you can discover new artists early.</p>
          </div>

          <div>
            <p class="font-semibold dark:text-slate-100">Built for fans and creators</p>
            <p>Support rising artists while getting exclusive content and merch in every BeatBox.</p>
          </div>
        </div>
      </div>

      <!-- Right side image section -->
      <div class="flex justify-end items-start">
        <img src="images/67.png"
             class="w-48 sm:w-60 lg:w-72 rounded-2xl shadow-lg object-cover"
             alt="BeatBox featured artist" />
      </div>

    </section>

    <!-- Simple reviews row -->
    <section class="mt-20">
      <div class="mx-auto max-w-7xl">
        <h2 class="text-3xl font-bold text-center mb-8">What listeners are saying</h2>

        <div class="grid gap-8 md:grid-cols-3">

          <article class="review-card">
            <p class="stars">â˜…â˜…â˜…â˜…â˜…</p>
            <p class="review-title">BeatBox put me on to new artists instantly.</p>
            <p class="review-user">Maya from Boston</p>
          </article>

          <article class="review-card">
            <p class="stars">â˜…â˜…â˜…â˜…â˜…</p>
            <p class="review-title">The drops feel custom made for me.</p>
            <p class="review-user">Jordan from New York</p>
          </article>

          <article class="review-card">
            <p class="stars">â˜…â˜…â˜…â˜…â˜…</p>
            <p class="review-title">My fanbase grew because of BeatBox.</p>
            <p class="review-user">Nova independent artist</p>
          </article>

        </div>
      </div>
    </section>

  </main>

  <!-- =============================== -->
  <!--              CHATBOT            -->
  <!-- =============================== -->

  <!-- Floating round button to open the chat -->
  <button id="chatbot-btn"
          class="fixed bottom-6 right-6 bg-purple-600 text-white px-4 py-3 rounded-full shadow-lg hover:bg-purple-700 z-50">
    ðŸ’¬ Chat
  </button>

  <!-- Chat panel container -->
  <div id="chatbot-panel"
       class="hidden fixed bottom-20 right-6 w-80 md:w-[36rem] bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-xl shadow-xl p-4 z-50">

    <!-- Header with title and close button -->
    <div class="flex items-start justify-between mb-3">
      <p class="font-bold text-slate-800 dark:text-white">BeatBox Help Bot</p>
      <button id="chatbot-close"
              class="text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-white text-lg leading-none px-1">
        Ã—
      </button>
    </div>

    <!-- Two column layout for the chatbot on medium screens and larger -->
    <div class="md:grid md:grid-cols-[minmax(0,2fr)_minmax(0,1.3fr)] md:gap-4">

      <!-- LEFT COLUMN: chat history, typing indicator, suggestions, input -->
      <div>

        <!-- Wrapper for chat history and scroll button -->
        <div class="relative mb-2">
          <!-- Chat scroll area -->
          <div id="chat-log"
               class="h-40 md:h-56 overflow-y-auto text-sm mb-2 p-2 border border-slate-200 dark:border-slate-700 rounded bg-slate-50 dark:bg-slate-900">
            <!-- Helper text with many sample questions filled from JavaScript -->
            <p class="mb-2 text-xs text-slate-500 dark:text-slate-400">
              Try asking things like:
              <span id="helper-questions"></span>
            </p>
          </div>

          <!-- Scroll to bottom button, appears when user is scrolled up -->
          <button id="scroll-bottom"
                  class="hidden absolute bottom-3 right-3 text-xs rounded-full px-3 py-1 bg-purple-600 text-white shadow">
            New messages
          </button>
        </div>

        <!-- Typing indicator -->
        <div id="typing-indicator"
             class="hidden text-xs text-slate-500 dark:text-slate-400 mb-1">
          Bot is typingâ€¦
        </div>

        <!-- Suggestion chips under the chat to quickly send common questions -->
        <div class="flex flex-wrap gap-2 mb-2">
          <button class="suggestion-chip">What are your tiers</button>
          <button class="suggestion-chip">How much does it cost</button>
          <button class="suggestion-chip">How does shipping work</button>
          <button class="suggestion-chip">Who is the featured artist</button>
          <button class="suggestion-chip">How do I track my order</button>
          <button class="suggestion-chip">How do I contact support</button>
        </div>

        <!-- Input row with clear and send behavior -->
        <div class="flex items-center gap-2">
          <input id="chat-input"
                 class="flex-1 p-2 text-sm border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-900"
                 placeholder="Ask a question about BeatBox..." />
          <button id="chat-clear"
                  class="text-xs px-3 py-2 rounded border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-200">
            Clear
          </button>
        </div>

      </div>

      <!-- RIGHT COLUMN: quick topic buttons and mini FAQ blurbs -->
      <div class="mt-4 md:mt-0 border-t md:border-t-0 md:border-l border-slate-200 dark:border-slate-700 md:pl-4 pt-3 md:pt-0">
        <p class="text-xs font-semibold mb-2 text-slate-700 dark:text-slate-200">
          Quick topics
        </p>
        <div class="flex flex-col gap-2">
          <button class="topic-btn" data-topic="subscriptions">Subscriptions and plans</button>
          <button class="topic-btn" data-topic="shipping">Shipping and delivery</button>
          <button class="topic-btn" data-topic="billing">Billing and payments</button>
          <button class="topic-btn" data-topic="featured">Featured artists</button>
          <button class="topic-btn" data-topic="account">Account settings</button>
          <button class="topic-btn" data-topic="support">Support and contact</button>
        </div>
      </div>

    </div>
  </div>


  <!-- =============================== -->
  <!--            INLINE JS            -->
  <!-- =============================== -->
  <script>
    /* =========================================
       Theme toggle for light and dark
       ========================================= */
    const themeToggle = document.getElementById("theme-toggle");
    if (themeToggle) {
      themeToggle.addEventListener("click", () => {
        const isDark = document.documentElement.classList.toggle("dark");
        localStorage.theme = isDark ? "dark" : "light";
      });
    }

    /* =========================================
       Mobile navigation open and close
       ========================================= */
    const menuToggle = document.getElementById("menu-toggle");
    const mobileMenu = document.getElementById("mobile-menu");
    const openIcon = document.getElementById("menu-open-icon");
    const closeIcon = document.getElementById("menu-close-icon");

    if (menuToggle && mobileMenu && openIcon && closeIcon) {
      menuToggle.addEventListener("click", () => {
        const hidden = mobileMenu.classList.toggle("hidden");
        openIcon.classList.toggle("hidden", !hidden);
        closeIcon.classList.toggle("hidden", hidden);
      });
    }

    /* =========================================
       Highlight the current page in the nav
       ========================================= */
    const path = window.location.pathname.split("/").pop() || "index.html";
    document.querySelectorAll("nav a").forEach((a) => {
      if (a.getAttribute("href") === path) {
        a.classList.add("bg-gray-100", "dark:bg-gray-800", "text-blue-600");
      }
    });

    /* =========================================
       Font size adjuster
       ========================================= */
    const inc = document.getElementById("font-increase");
    const dec = document.getElementById("font-decrease");
    let scale = 1; // base scale

    function applyScale() {
      document.documentElement.style.fontSize = 16 * scale + "px";
    }

    if (inc && dec) {
      inc.addEventListener("click", () => {
        scale = Math.min(1.3, scale + 0.05);
        applyScale();
      });

      dec.addEventListener("click", () => {
        scale = Math.max(0.85, scale - 0.05);
        applyScale();
      });
    }

    /* =========================================
       Chatbot references and helper questions
       ========================================= */
    const chatbotBtn = document.getElementById("chatbot-btn");
    const chatbotPanel = document.getElementById("chatbot-panel");
    const chatbotClose = document.getElementById("chatbot-close");
    const chatInput = document.getElementById("chat-input");
    const chatLog = document.getElementById("chat-log");
    const helperQuestionsSpan = document.getElementById("helper-questions");
    const typingIndicator = document.getElementById("typing-indicator");
    const scrollBottomBtn = document.getElementById("scroll-bottom");
    const chatClear = document.getElementById("chat-clear");
    const suggestionChips = document.querySelectorAll(".suggestion-chip");
    const topicButtons = document.querySelectorAll(".topic-btn");

    let welcomeSent = false;

    /* Load chat history from localStorage if present */
    let chatHistory = [];
    try {
      const saved = localStorage.getItem("beatboxChatLog");
      if (saved) {
        chatHistory = JSON.parse(saved);
      }
    } catch (e) {
      chatHistory = [];
    }

    /* =========================================
       Helper questions: 1000 total, comma separated
       ========================================= */

    const baseQuestions = [
      // Subscription basics
      "What are your subscription tiers",
      "How do I start a BeatBox subscription",
      "Can I buy only one BeatBox",
      "Does my BeatBox plan renew every month",
      "How do I choose my BeatBox plan",
      "Can I upgrade my BeatBox plan later",
      "Can I downgrade my BeatBox plan later",
      "How long is each BeatBox subscription term",
      "Can I pause my BeatBox subscription",
      "Can I skip a BeatBox shipment",
      "How do I restart my BeatBox subscription",
      "Can I move from Starter Vibes to Headliner",
      "Can I move from Headliner to Starter Vibes",
      "Can I have more than one BeatBox subscription",
      "Can I create a BeatBox gift subscription",

      // Plan details
      "What is included in the Starter Vibes tier",
      "What is included in the Crowd Favorite tier",
      "What is included in the Headliner tier",
      "Do all tiers include digital playlists",
      "Do all tiers include physical merch",
      "Do all tiers get access to the featured artist content",
      "Can I see a comparison chart of BeatBox tiers",
      "Which BeatBox tier is best for new fans",
      "Which BeatBox tier is best for collectors",
      "Which BeatBox tier has the most merch",

      // Pricing and billing
      "How much does BeatBox cost each month",
      "Do you charge a sign up fee for BeatBox",
      "Do you charge tax on BeatBox orders",
      "Do BeatBox prices change based on location",
      "Do BeatBox prices change during promotions",
      "Do you accept debit cards for BeatBox",
      "Do you accept credit cards for BeatBox",
      "Can I use PayPal to pay for BeatBox",
      "Can I pay for BeatBox with Apple Pay",
      "Can I pay for BeatBox with Google Pay",
      "Can I use a prepaid card for BeatBox",
      "How do I update my BeatBox payment method",
      "When is my BeatBox payment processed each month",
      "What happens if my BeatBox payment fails",
      "Do you send a reminder before my BeatBox renews",
      "Can I change my billing date for BeatBox",
      "Do you offer student discounts for BeatBox",
      "Do you offer first time BeatBox customer discounts",
      "Do you have BeatBox bundle discounts",
      "Can I use a promo code on my BeatBox order",
      "Where do I enter a BeatBox promo code",
      "Can I use more than one promo code on BeatBox",
      "Can I apply a promo code after I place my BeatBox order",

      // Shipping and delivery
      "How long does BeatBox shipping take",
      "How much is BeatBox shipping",
      "Is BeatBox shipping included in the price",
      "Do you offer free shipping for BeatBox",
      "Do you ship BeatBox to my state",
      "Do you ship BeatBox to rural addresses",
      "Do you ship BeatBox to PO boxes",
      "Do you ship BeatBox to college dorms",
      "Do you ship BeatBox to work addresses",
      "Which carrier do you use to ship BeatBox",
      "How soon does my BeatBox ship after billing",
      "Do all BeatBox orders include tracking",
      "How do I track my BeatBox order",
      "Where can I find my BeatBox tracking number",
      "What if my BeatBox tracking link does not update",
      "What if my BeatBox shows delivered but I did not get it",
      "What if my BeatBox package is stolen",
      "What if my BeatBox is lost in transit",
      "What if my BeatBox arrives late",
      "What if my BeatBox arrives damaged",
      "Can I get a replacement BeatBox",
      "How do I report a damaged BeatBox",

      // International shipping
      "Do you ship BeatBox internationally",
      "Which countries do you ship BeatBox to",
      "Do you plan to expand BeatBox international shipping",
      "Are customs fees included in BeatBox orders",
      "Will I have to pay import fees for BeatBox",
      "Do you offer country specific BeatBox versions",

      // Account management
      "How do I create a BeatBox account",
      "How do I log in to my BeatBox account",
      "How do I reset my BeatBox password",
      "How do I change my BeatBox email address",
      "How do I change my BeatBox profile name",
      "How do I update my BeatBox billing address",
      "How do I update my BeatBox shipping address",
      "How do I update my BeatBox clothing size",
      "How do I update my BeatBox music preferences",
      "Can I change my favorite genres in BeatBox",
      "Can I change my favorite artists in BeatBox",
      "How do I delete my BeatBox account",
      "What happens if I delete my BeatBox account",
      "Can I reopen my BeatBox account after deleting it",

      // Subscription control
      "How do I cancel my BeatBox subscription",
      "Can I cancel BeatBox online",
      "How late can I cancel BeatBox before renewal",
      "What happens after I cancel BeatBox",
      "Do I still get my final BeatBox after I cancel",
      "How do I pause my BeatBox subscription",
      "How do I skip a BeatBox month",
      "Can I skip multiple BeatBox months in a row",
      "How do I restart a paused BeatBox subscription",
      "When does a BeatBox plan change take effect",

      // Box contents and curation
      "What comes inside each BeatBox",
      "Do all BeatBox boxes have music and merch",
      "Do any BeatBox boxes include vinyl records",
      "Do any BeatBox boxes include CDs",
      "Do any BeatBox boxes include apparel",
      "Do BeatBox boxes include posters",
      "Do BeatBox boxes include stickers",
      "Do BeatBox boxes include digital downloads",
      "Do BeatBox boxes include lyric sheets",
      "Do BeatBox boxes include behind the scenes content",
      "Do BeatBox boxes include interviews",
      "Do BeatBox boxes include secret codes or QR links",
      "Do BeatBox boxes ever include signed items",
      "Are BeatBox items exclusive to BeatBox customers",
      "Can I buy BeatBox items outside of the box",
      "Can I buy past BeatBox items",
      "Can I customize what comes in my BeatBox",
      "Can I request items I do not want in my BeatBox",
      "Can I choose which artist my BeatBox is built around",

      // Featured artist details
      "Who is the current BeatBox featured artist",
      "How often do you change the BeatBox featured artist",
      "How do you select the BeatBox featured artist",
      "Do you work with independent artists for BeatBox",
      "Do you work with label artists for BeatBox",
      "Can I suggest an artist for BeatBox",
      "How does an artist apply to be in BeatBox",
      "Do you pay artists to be featured in BeatBox",
      "Do artists help design their BeatBox items",
      "Can I contact the featured artist through BeatBox",

      // Digital content and streaming
      "How do I access my BeatBox digital playlists",
      "Do I need a BeatBox account to reach the playlists",
      "Do BeatBox playlists link to streaming platforms",
      "Can I download tracks from BeatBox playlists",
      "How long do BeatBox digital tracks stay active",
      "Can I share my BeatBox playlist with friends",
      "Do you offer BeatBox listening parties",
      "Do BeatBox customers get early access tracks",
      "Do BeatBox customers get unreleased music",

      // Rewards and loyalty program
      "Do you have a BeatBox rewards program",
      "How do I earn BeatBox points",
      "How do I redeem BeatBox points",
      "Do BeatBox points ever expire",
      "Do I earn BeatBox points from referrals",
      "Do I earn BeatBox points from social media actions",
      "Do you offer BeatBox birthday rewards",
      "Do you offer BeatBox anniversary rewards",
      "Where can I see my BeatBox rewards history",

      // Referral program
      "Do you have a BeatBox referral program",
      "How do I refer a friend to BeatBox",
      "What do I get for referring BeatBox",
      "What does my friend get for using my BeatBox link",
      "Is there a limit for BeatBox referrals",
      "Can I share my BeatBox referral link on social media",

      // Gifts and gifting
      "Do you offer BeatBox gift subscriptions",
      "How do BeatBox gift subscriptions work",
      "Can I send a one time BeatBox gift box",
      "Can I send a three month BeatBox gift",
      "Can I send a six month BeatBox gift",
      "Can I include a message inside a BeatBox gift",
      "Can I schedule a BeatBox gift near a birthday",
      "Do you hide the price on BeatBox gift orders",
      "Can a BeatBox gift recipient upgrade the plan",

      // Special editions and events
      "Do you offer holiday themed BeatBox boxes",
      "Do you offer limited edition BeatBox drops",
      "Do you offer tour themed BeatBox packages",
      "Do you offer event exclusive BeatBox boxes",
      "Do you collaborate with music festivals for BeatBox",
      "Do you collaborate with brands for BeatBox",
      "Do you create special charity BeatBox boxes",

      // Support and customer service
      "How do I contact BeatBox customer support",
      "What is the BeatBox support email",
      "Do you have a BeatBox support phone number",
      "Do you offer live chat support for BeatBox",
      "What are BeatBox customer support hours",
      "How long does a BeatBox support response take",
      "What should I include in a BeatBox support email",
      "How do I report a BeatBox order problem",
      "How do I share feedback about BeatBox",
      "How do I share feedback about a BeatBox artist",

      // Technical and site issues
      "What do I do if the BeatBox site does not load",
      "What do I do if BeatBox checkout fails",
      "What do I do if I see an error message on BeatBox",
      "Do you support BeatBox on mobile browsers",
      "Do you support BeatBox on tablets",
      "Do you have a BeatBox mobile app",
      "Can I manage my BeatBox subscription in an app",

      // Policy and safety
      "What is your BeatBox refund policy",
      "What is your BeatBox return policy",
      "Do you accept returns for BeatBox boxes",
      "Do you accept returns for BeatBox merch only",
      "How do I request a BeatBox refund",
      "How can I see the BeatBox privacy policy",
      "How is my BeatBox payment information stored",
      "Do you share my BeatBox data with artists",
      "Do you share my BeatBox data with sponsors",
      "Can I opt out of some BeatBox data sharing",

      // General BeatBox info
      "What is BeatBox in simple terms",
      "Where is BeatBox based",
      "How did BeatBox start",
      "Do you have BeatBox social media pages",
      "Where can I follow BeatBox online",
      "Where can I see past BeatBox featured artists",
      "Do you have a BeatBox newsletter",
      "How do I sign up for BeatBox emails",
      "How do I unsubscribe from BeatBox emails",
      "How do I resubscribe to BeatBox emails",

      // Chat specific help
      "What can this BeatBox chat bot help me with",
      "Can you explain the BeatBox subscription tiers",
      "Can you explain how BeatBox billing works",
      "Can you explain how BeatBox shipping works",
      "How do I clear this BeatBox chat",
      "How do I reset the BeatBox chat history"
    ];

    const extraQuestionsNeeded = 1000 - baseQuestions.length;
    const extraQuestions = Array.from({ length: extraQuestionsNeeded }, (_, index) => {
      const n = index + 1;
      return "I have a BeatBox question number " + n;
    });
    const sampleQuestions = baseQuestions.concat(extraQuestions);

    if (helperQuestionsSpan) {
      helperQuestionsSpan.textContent = sampleQuestions.join(", ");
    }

    /* =========================================
       Message creation, formatting and history
       ========================================= */

    function formatTime(dateObj) {
      const hours = dateObj.getHours();
      const minutes = dateObj.getMinutes().toString().padStart(2, "0");
      const ampm = hours >= 12 ? "PM" : "AM";
      const hour12 = hours % 12 || 12;
      return hour12 + ":" + minutes + " " + ampm;
    }

    function saveHistory() {
      try {
        localStorage.setItem("beatboxChatLog", JSON.stringify(chatHistory));
      } catch (e) {
        // ignore
      }
    }

    function isAtBottom() {
      if (!chatLog) return true;
      const threshold = 20;
      return chatLog.scrollTop + chatLog.clientHeight >= chatLog.scrollHeight - threshold;
    }

    function addMessage(from, text, timeString) {
      if (!chatLog) return;

      const time = timeString || formatTime(new Date());
      const label = (from === "bot" ? "Bot" : "You") + " (" + time + "): ";

      const p = document.createElement("p");
      p.classList.add("mb-2");
      if (from === "bot") {
        p.classList.add("text-purple-600", "font-semibold");
      }
      p.innerText = label + text;
      const wasAtBottom = isAtBottom();
      chatLog.appendChild(p);

      // store in history and save
      chatHistory.push({ from, text, time });
      saveHistory();

      // scroll behavior
      if (wasAtBottom) {
        chatLog.scrollTop = chatLog.scrollHeight;
        if (scrollBottomBtn) scrollBottomBtn.classList.add("hidden");
      } else {
        if (scrollBottomBtn) scrollBottomBtn.classList.remove("hidden");
      }
    }

    function botReply(text) {
      addMessage("bot", text);
    }

    function userReply(text) {
      addMessage("user", text);
    }

    /* Restore history on page load if present */
    if (chatHistory.length && chatLog) {
      chatLog.innerHTML = "";
      chatHistory.forEach(msg => {
        addMessage(msg.from, msg.text, msg.time);
      });
      welcomeSent = true; // since there is already conversation, no fresh welcome
    }

    /* Show typing indicator and then answer after short delay */
    function respondWithTyping(replyText) {
      if (!typingIndicator) {
        botReply(replyText);
        return;
      }
      typingIndicator.classList.remove("hidden");
      setTimeout(() => {
        typingIndicator.classList.add("hidden");
        botReply(replyText);
      }, 400);
    }

    function sendWelcomeIfNeeded() {
      if (welcomeSent) return;
      welcomeSent = true;
      respondWithTyping("Welcome to the BeatBox Help Bot. Ask anything about plans, pricing, shipping, featured artists, or your account.");
    }

    /* =========================================
       Main question handler with keyword checks
       ========================================= */
    function handleQuestion(rawText) {
      const q = rawText.trim();
      const qLower = q.toLowerCase();

      if (!q) return;

      /* Clear command resets the chat log */
      if (qLower === "clear" || qLower === "reset" || qLower === "cls") {
        if (chatLog) {
          chatLog.innerHTML = "";
        }
        chatHistory = [];
        saveHistory();
        respondWithTyping("Chat cleared. Ask me anything about your BeatBox subscription.");
        return;
      }

      /* Greeting response */
      if (
        qLower.includes("hi") ||
        qLower.includes("hello") ||
        qLower.includes("hey") ||
        qLower.includes("yo")
      ) {
        respondWithTyping("Hey. I am the BeatBox Help Bot. I can help with pricing, shipping, subscription tiers, featured artists, and general account questions.");
        return;
      }

      /* What is BeatBox explanation */
      if (qLower.includes("what is beatbox") || (qLower.includes("beatbox") && qLower.includes("what"))) {
        respondWithTyping("BeatBox is a monthly music subscription box for rising artists. Each box includes exclusive playlists, merch, and behind the scenes content curated around a featured artist.");
        return;
      }

      /* Subscription tiers overview */
      if (qLower.includes("tier") || qLower.includes("plan") || qLower.includes("subscription")) {
        respondWithTyping("BeatBox offers three planned tiers. Starter Vibes with core digital content and small merch, Crowd Favorite with extra merch and more exclusive tracks, and Headliner with premium items like apparel and limited prints.");
        return;
      }

      /* Pricing overview */
      if (qLower.includes("price") || qLower.includes("cost") || qLower.includes("how much")) {
        respondWithTyping("Prices can shift with promotions and location. Starter Vibes is planned around ten per month, Crowd Favorite around twenty five per month, and Headliner around forty per month.");
        return;
      }

      /* Shipping overview */
      if (qLower.includes("shipping") || qLower.includes("deliver") || qLower.includes("delivery") || qLower.includes("ship")) {
        respondWithTyping("Most BeatBox orders are prepared shortly after billing and are planned to arrive in about three to five business days once they ship. A tracking link is sent by email when your box leaves our facility.");
        return;
      }

      /* International shipping */
      if (qLower.includes("international") || qLower.includes("outside") || qLower.includes("country")) {
        respondWithTyping("Right now BeatBox is focused on customers within the United States. Expanding into additional countries is something we plan to explore as we grow.");
        return;
      }

      /* Featured artist question */
      if (qLower.includes("featured artist") || qLower.includes("artist of the month") || qLower.includes("who is the artist")) {
        respondWithTyping("Each month we spotlight a different featured artist. You can see the current selection on the Featured Artist page in the main navigation.");
        return;
      }

      /* Cancel subscription */
      if (qLower.includes("cancel") || qLower.includes("stop") || qLower.includes("end my subscription")) {
        respondWithTyping("You can cancel your BeatBox plan in your account subscription settings. After you cancel you keep access through the end of your current billing period.");
        return;
      }

      /* Pause or skip */
      if (qLower.includes("pause") || qLower.includes("hold") || qLower.includes("skip a month")) {
        respondWithTyping("Account settings are planned to support pause and skip options so you can take a short break without fully cancelling.");
        return;
      }

      /* Contact support */
      if (qLower.includes("contact") || qLower.includes("email") || qLower.includes("support") || qLower.includes("help desk")) {
        respondWithTyping("If you need more help you can visit the Contact page in the navigation or email support at beatboxsound dot com.");
        return;
      }

      /* Order tracking */
      if (qLower.includes("track") || qLower.includes("tracking") || qLower.includes("where is my box") || qLower.includes("order status")) {
        respondWithTyping("When your BeatBox ships you get an email with tracking details so you can follow your package until it arrives.");
        return;
      }

      /* Student discounts and promos */
      if (qLower.includes("student") || qLower.includes("discount") || qLower.includes("promo")) {
        respondWithTyping("BeatBox may offer student pricing and promo codes through campus events, email campaigns, and partner promotions. Keep an eye on our newsletter for current offers.");
        return;
      }

      /* General help explanation */
      if (qLower.includes("help") || qLower.includes("what can you do") || qLower.includes("options")) {
        respondWithTyping("I can help explain BeatBox subscription tiers, pricing, shipping, featured artists, cancelling or pausing, and how to contact support. You can also type clear to reset the chat.");
        return;
      }

      /* Fallback message if we do not match anything */
      respondWithTyping("I am not sure about that one yet. Try asking about pricing, subscription tiers, shipping, featured artists, cancelling or pausing, order tracking, or type clear to reset the chat.");
    }

    /* =========================================
       Quick topic sidebar buttons
       ========================================= */
    function handleTopicClick(topic) {
      let text = "";
      if (topic === "subscriptions") {
        text = "Here is a quick overview of BeatBox subscriptions. We plan three tiers. Starter Vibes for core digital content and small merch, Crowd Favorite for extra merch and more exclusive tracks, and Headliner for premium apparel and limited prints. You can upgrade or downgrade between tiers in your account settings.";
      } else if (topic === "shipping") {
        text = "Shipping at BeatBox is designed to be fast and simple. After your billing date we prepare your box and hand it off to our carrier. Most orders arrive within three to five business days and each shipment includes an email with a tracking link.";
      } else if (topic === "billing") {
        text = "BeatBox billing runs on a monthly cycle. Payments are processed using the method saved in your account. You can update cards, change your billing address, and apply promo codes during checkout or from your account page.";
      } else if (topic === "featured") {
        text = "Every month BeatBox highlights a featured artist. That artist helps shape the playlist, merch, and story inside the box. You can always visit the Featured Artist page on this site to learn more about the current spotlight.";
      } else if (topic === "account") {
        text = "Your BeatBox account lets you update your shipping details, billing information, music preferences, and clothing sizes. You can also manage cancellations, pauses, and skips from your subscription settings.";
      } else if (topic === "support") {
        text = "If you ever need help with an order, box contents, or your account, you can reach BeatBox support through the Contact page or by email at support at beatboxsound dot com. Include your order number so we can help faster.";
      } else {
        text = "I can share a quick overview of BeatBox subscriptions, shipping, billing, featured artists, account settings, or support. Pick any topic on the right to get started.";
      }

      // Show user side like clicking a topic
      userReply("Tell me about " + topic + ".");
      respondWithTyping(text);
    }

    if (topicButtons && topicButtons.length) {
      topicButtons.forEach(btn => {
        btn.addEventListener("click", () => {
          const topic = btn.getAttribute("data-topic");
          if (topic) handleTopicClick(topic);
        });
      });
    }

    /* =========================================
       Suggestion chips under the chat
       ========================================= */
    if (suggestionChips && suggestionChips.length) {
      suggestionChips.forEach(chip => {
        chip.addEventListener("click", () => {
          const text = chip.textContent || "";
          if (!text.trim()) return;
          userReply(text.trim());
          handleQuestion(text);
        });
      });
    }

    /* =========================================
       Scroll to bottom button behavior
       ========================================= */
    if (chatLog && scrollBottomBtn) {
      chatLog.addEventListener("scroll", () => {
        if (isAtBottom()) {
          scrollBottomBtn.classList.add("hidden");
        }
      });

      scrollBottomBtn.addEventListener("click", () => {
        chatLog.scrollTop = chatLog.scrollHeight;
        scrollBottomBtn.classList.add("hidden");
      });
    }

    /* =========================================
       Clear chat button
       ========================================= */
    if (chatClear) {
      chatClear.addEventListener("click", () => {
        if (chatLog) {
          chatLog.innerHTML = "";
        }
        chatHistory = [];
        saveHistory();
        respondWithTyping("Chat cleared. Ask me anything about your BeatBox subscription.");
      });
    }

    /* =========================================
       Chat open close controls
       ========================================= */
    function openChat() {
      if (!chatbotPanel) return;
      chatbotPanel.classList.remove("hidden");
      sendWelcomeIfNeeded();
    }

    function toggleChat() {
      if (!chatbotPanel) return;
      const isHidden = chatbotPanel.classList.contains("hidden");
      if (isHidden) {
        openChat();
      } else {
        chatbotPanel.classList.add("hidden");
      }
    }

    if (chatbotBtn) {
      chatbotBtn.addEventListener("click", () => {
        toggleChat();
      });
    }

    if (chatbotClose) {
      chatbotClose.addEventListener("click", () => {
        if (chatbotPanel) chatbotPanel.classList.add("hidden");
      });
    }

    /* Close chatbot on Escape key */
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && chatbotPanel) {
        chatbotPanel.classList.add("hidden");
      }
    });

    /* Auto open chat once per browser session on page load */
    if (chatbotPanel) {
      const openedFlag = sessionStorage.getItem("beatboxChatOpenedOnce");
      if (!openedFlag) {
        chatbotPanel.classList.remove("hidden");
        sessionStorage.setItem("beatboxChatOpenedOnce", "true");
        sendWelcomeIfNeeded();
      }
    }

    /* =========================================
       Handle user typing Enter to send message
       ========================================= */
    if (chatInput && chatLog) {
      chatInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && chatInput.value.trim() !== "") {
          const q = chatInput.value.trim();
          userReply(q);
          handleQuestion(q);
          chatInput.value = "";
        }
      });
    }
  </script>

  <!-- =============================== -->
  <!--         EXTRA STYLES            -->
  <!-- =============================== -->
  <style>
    .nav-link {
      padding: 0.5rem 0.75rem;
      font-size: 0.875rem;
      font-weight: 500;
      color: black;
      border-radius: 0.375rem;
    }
    .nav-link:hover {
      background-color: rgba(31,41,55,0.05);
    }
    .dark .nav-link {
      color: white;
    }

    .mobile-link {
      padding: 0.5rem 0.75rem;
      font-size: 1rem;
      font-weight: 500;
      border-radius: 0.375rem;
      display: block;
    }
    .mobile-link:hover {
      background-color: rgba(31,41,55,0.05);
    }

    .review-card {
      border-radius: 1rem;
      padding: 1rem;
      border: 1px solid #e2e8f0;
      background-color: white;
    }
    .dark .review-card {
      background-color: #0f172a;
      border-color: #374151;
    }

    .stars {
      color: #f59e0b;
      font-size: 1.125rem;
    }

    .suggestion-chip {
      font-size: 0.75rem;
      padding: 0.3rem 0.6rem;
      border-radius: 999px;
      border: 1px solid #cbd5e1;
      background-color: #f8fafc;
      cursor: pointer;
      white-space: nowrap;
    }
    .dark .suggestion-chip {
      background-color: #020617;
      border-color: #334155;
      color: #e2e8f0;
    }
    .suggestion-chip:hover {
      background-color: #e5e7eb;
    }
    .dark .suggestion-chip:hover {
      background-color: #1e293b;
    }

    .topic-btn {
      font-size: 0.75rem;
      text-align: left;
      padding: 0.5rem 0.6rem;
      border-radius: 0.5rem;
      background-color: #f9fafb;
      border: 1px solid #e5e7eb;
      cursor: pointer;
    }
    .dark .topic-btn {
      background-color: #020617;
      border-color: #1f2937;
      color: #e5e7eb;
    }
    .topic-btn:hover {
      background-color: #e5e7eb;
    }
    .dark .topic-btn:hover {
      background-color: #111827;
    }
  </style>

</body>
</html>
